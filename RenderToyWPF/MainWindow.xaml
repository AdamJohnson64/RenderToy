<Window x:Class="RenderToy.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:rendertoy="clr-namespace:RenderToy.WPF"
        mc:Ignorable="d"
        Title="RenderToy Experiment" Height="600" Width="1024">
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="New" Command="{x:Static rendertoy:MainWindow.CommandSceneNew}"/>
                <MenuItem Header="Open" Command="{x:Static rendertoy:MainWindow.CommandSceneOpen}"/>
                <MenuItem Header="Plane" Command="{x:Static rendertoy:MainWindow.CommandScenePlane}"/>
                <MenuItem Header="Add Sphere" Command="{x:Static rendertoy:MainWindow.CommandSceneAddSphere}"/>
            </MenuItem>
            <MenuItem Header="Debug">
                <MenuItem Header="Performance Trace" Command="{x:Static rendertoy:MainWindow.CommandDebugToolPerformanceTrace}"/>
            </MenuItem>
            <MenuItem Header="Window">
                <MenuItem Header="New Software View" Command="{x:Static rendertoy:MainWindow.CommandWindowSoftware}"/>
                <MenuItem Header="New Direct3D9 (Fixed Function) View" Command="{x:Static rendertoy:MainWindow.CommandWindowDirect3D9FF}"/>
                <MenuItem Header="New Direct3D9 View" Command="{x:Static rendertoy:MainWindow.CommandWindowDirect3D9}"/>
                <MenuItem Header="New Direct3D11 View" Command="{x:Static rendertoy:MainWindow.CommandWindowDirect3D11}"/>
                <MenuItem Header="New Direct3D12 View" Command="{x:Static rendertoy:MainWindow.CommandWindowDirect3D12}"/>
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="Open RenderToy Document" Command="{x:Static rendertoy:MainWindow.CommandDocumentOpen}"/>
                <MenuItem Header="Export RenderToy Document" Command="{x:Static rendertoy:MainWindow.CommandDocumentExport}"/>
            </MenuItem>
        </Menu>
        <DockPanel>
            <!-- ==================== Scene Graph ==================== -->
            <TreeView ItemsSource="{Binding Path=Scene.Children}" Width="192">
                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                        <TextBlock Text="{Binding Name}"/>
                        <HierarchicalDataTemplate.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}" />
                            </DataTemplate>
                        </HierarchicalDataTemplate.ItemTemplate>
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>
            </TreeView>
            <!-- ==================== Material List ==================== -->
            <GroupBox DataContext="{Binding Path=Materials}" Header="Material Nodes" Margin="4" Padding="4">
                <ListView x:Name="MaterialList" DockPanel.Dock="Left" ItemsSource="{Binding}" IsSynchronizedWithCurrentItem="True" ItemTemplate="{StaticResource GraphNodeTemplate}">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>
            </GroupBox>
            <!-- ==================== Texture View ==================== -->
            <ContentControl Content="{Binding ElementName=MaterialList, Path=SelectedItem}">
                <ContentControl.ContentTemplate>
                    <DataTemplate>
                        <TabControl>
                            <TabItem Header="Graph">
                                <DockPanel>
                                    <Menu DockPanel.Dock="Top">
                                        <MenuItem Command="{x:Static rendertoy:ViewZoom.RecenterCommand}" CommandTarget="{Binding ElementName=ViewZoomGraph}"/>>
                                    </Menu>
                                    <rendertoy:ViewZoom x:Name="ViewZoomGraph">
                                        <rendertoy:ViewMaterialGraph Root="{Binding}" NodeTemplate="{StaticResource GraphNode}"/>
                                    </rendertoy:ViewZoom>
                                </DockPanel>
                            </TabItem>
                            <TabItem Header="Preview">
                                <DockPanel>
                                    <Menu DockPanel.Dock="Top">
                                        <MenuItem Command="{x:Static rendertoy:ViewZoom.RecenterCommand}" CommandTarget="{Binding ElementName=ViewZoomPreview}"/>>
                                    </Menu>
                                    <rendertoy:ViewZoom x:Name="ViewZoomPreview">
                                        <rendertoy:ViewMaterial MaterialSource="{Binding}" MaterialWidth="256" MaterialHeight="256" RenderOptions.BitmapScalingMode="NearestNeighbor"/>
                                    </rendertoy:ViewZoom>
                                </DockPanel>
                            </TabItem>
                        </TabControl>
                    </DataTemplate>
                </ContentControl.ContentTemplate>
            </ContentControl>
        </DockPanel>
    </DockPanel>
</Window>
